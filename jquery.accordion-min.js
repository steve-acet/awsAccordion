/**################################################
##
##   project:    awsAccordion - a vertical/horizontal accordion plugin for jQuery
##   author:     @anotherwebstorm
##   demo:       code.anotherwebstorm.com/apps/awsaccordion.html
##   Version:    1.0
##   Copyright:  (c) 2012-2013 Marco Cardoso
##
################################################**/
(function(e){var t=function(t,n){var r={type:"vertical",cssAttrsVer:{ulWidth:700,liHeight:40},cssAttrsHor:{ulWidth:700,liWidth:40,liHeight:300,responsiveMedia:false},startSlide:1,openCloseHelper:{numeric:false,openIcon:false,closeIcon:false},openOnebyOne:true,classTab:"active",slideOn:"click",autoPlay:false,autoPlaySpeed:2e3},i=e.extend(true,{},r,n),s=parseInt(e(t.parent()).css("width"),10),o=e(t).html(),u=t.children().children(),a=u.length,f="",l=parseFloat(navigator.appVersion.split("MSIE")[1]),c={play:function(){var t;if(i.startSlide&&i.startSlide!==a){t=i.startSlide}else{t=0}f=setInterval(function(){if(t<a){var n=t++;e(u[n]).trigger("click");if(t===a){n=0;t=0}}},i.autoPlaySpeed)},stop:function(){window.clearInterval(f)},calcBordWidthHor:function(){var t,n;if(!isNaN(parseInt(e(u).parent().find("li").css("border-right-width"),10))){t=parseInt(e(u).parent().find("li").css("border-right-width"),10)}else{t=0}if(!isNaN(parseInt(e(u).parent().find("li").css("border-left-width"),10))){n=parseInt(e(u).parent().find("li").css("border-left-width"),10)}else{n=0}return t+n},calcDivWidthHor:function(){if(e.type(i.cssAttrsHor.ulWidth)==="number"){return i.cssAttrsHor.ulWidth-e(u).parent().find("li").length*(i.cssAttrsHor.liWidth+c.calcBordWidthHor())}else{return s-e(u).parent().find("li").length*(i.cssAttrsHor.liWidth+c.calcBordWidthHor())}},matchQueryMedia:function(){window.matchMedia=window.matchMedia||function(e,t){var n=e.documentElement,r=n.firstElementChild||n.firstChild,i=e.createElement("body"),s=e.createElement("div"),o,u,a,f;s.id="mq-test-1";s.style.cssText="position:absolute;top:-100em";i.style.background="none";i.appendChild(s);o=function(e){var t;s.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>';n.insertBefore(i,r);t=s.offsetWidth===42;n.removeChild(i);return{matches:t,media:e}};u=function(){var t,r=n.body,i=false;s.style.cssText="position:absolute;font-size:1em;width:1em";if(!r){r=i=e.createElement("body");r.style.background="none"}r.appendChild(s);n.insertBefore(r,n.firstChild);if(i){n.removeChild(r)}else{r.removeChild(s)}t=f=parseFloat(s.offsetWidth);return t};f;a=o("(min-width: 0px)").matches;return function(t){if(a){return o(t)}else{var n=t.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),r=t.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),i=n===null,s=r===null,l=e.body.offsetWidth,c="em",h;if(!!n){n=parseFloat(n)*(n.indexOf(c)>-1?f||u():1)}if(!!r){r=parseFloat(r)*(r.indexOf(c)>-1?f||u():1)}h=(!i||!s)&&(i||l>=n)&&(s||l<=r);return{matches:h,media:t}}}}(document)},responsiveAction:function(n){if(n.matches){e(t).empty().removeAttr("class").addClass("accordion-ver").html(o);e(t).awsAccordion({type:"vertical",cssAttrsVer:{ulWidth:"responsive",liHeight:i.cssAttrsVer.liHeight},startSlide:i.startSlide,openCloseHelper:{numeric:i.openCloseHelper.numeric,openIcon:i.openCloseHelper.openIcon,closeIcon:i.openCloseHelper.closeIcon},openOnebyOne:true,classTab:i.classTab,slideOn:i.slideOn,autoPlay:i.autoPlay,autoPlaySpeed:i.autoPlaySpeed})}else{e(t).empty().removeAttr("class").addClass("accordion-hor").html(o);e(t).awsAccordion({type:"horizontal",cssAttrsVer:{ulWidth:"responsive",liHeight:i.cssAttrsVer.liHeight},cssAttrsHor:{ulWidth:"responsive",liWidth:i.cssAttrsHor.liWidth,liHeight:i.cssAttrsHor.liHeight,responsiveMedia:i.cssAttrsHor.responsiveMedia},startSlide:i.startSlide,openCloseHelper:{numeric:i.openCloseHelper.numeric,openIcon:i.openCloseHelper.openIcon,closeIcon:i.openCloseHelper.closeIcon},classTab:i.classTab,slideOn:i.slideOn,autoPlay:i.autoPlay,autoPlaySpeed:i.autoPlaySpeed})}}},h={bindEvents:function(){u.on(i.slideOn,h.slideContent);u.each(h.resetSlideContent);h.setAttrs();if(i.autoPlay){c.play()}},setAttrs:function(){var t,n,r,o,f,p,d,v,m,g;if(i.type==="vertical"){if(e.type(i.cssAttrsVer.ulWidth)==="number"){e(u).parent().css({width:i.cssAttrsVer.ulWidth+"px"})}else{e(u).parent().css({width:"100%"})}if(i.cssAttrsVer.liHeight){e(u).css({"padding-top":i.cssAttrsVer.liHeight+"px"})}if(l===7||l===8){e("body").css({height:"auto","overflow-y":"scroll","overflow-x":"hidden"})}}if(i.type==="horizontal"){if(l===7||l===8){e("body").removeAttr("style")}if(e.type(i.cssAttrsHor.ulWidth)==="number"){e(u).parent().css({width:i.cssAttrsHor.ulWidth+"px"})}else{c.matchQueryMedia();n=window.matchMedia(i.cssAttrsHor.responsiveMedia);if(n.matches){c.responsiveAction(n)}else{e(u).parent().css({width:s+"px"})}if(l===7||l===8){e(window).resize(function(){m=e(window).height();g=e(window).width();if(d===undefined||d!==m||v===undefined||v!==g){d=m;v=g;c.matchQueryMedia();n=window.matchMedia(i.cssAttrsHor.responsiveMedia);c.responsiveAction(n)}})}else{window.onresize=function(e){c.matchQueryMedia();n=window.matchMedia(i.cssAttrsHor.responsiveMedia);c.responsiveAction(n)}}}for(t=0;t<e(u).parent().find("li").length;t++){e(u).parent().find("li").eq(t).css({width:i.cssAttrsHor.liWidth+"px",height:i.cssAttrsHor.liHeight+"px"}).find("div").css({left:i.cssAttrsHor.liWidth+"px",width:c.calcDivWidthHor()+"px",height:i.cssAttrsHor.liHeight+"px"})}}if(i.openCloseHelper){if(i.openCloseHelper.numeric){for(t=0;t<=a;t++){e(u[t]).append('<span class="numericTab tab'+[t+1]+'">'+[t+1]+"</span>")}}else if(i.openCloseHelper.openIcon){for(t=0;t<=a;t++){e(u[t]).append('<i class="icon-'+i.openCloseHelper.openIcon+'"></i>')}}r=parseInt(e(u).find("span.numericTab").css("height"),10)/2;o=parseInt(e(u).find("i").css("height"),10)/2;f=parseInt(e(u).find("h1").css("height"),10)/2;p=parseInt(e(u).find("h1").css("width"),10)/2;if(i.type==="horizontal"){if(u.find("h1").length>0){if(l===7||l===8||l===9){e(u).find("h1").css({top:"0px",width:"auto",left:i.cssAttrsHor.liWidth/2-p+"px"})}else{e(u).find("h1").css("left",i.cssAttrsHor.liWidth/2-f+"px")}}if(i.openCloseHelper){if(i.openCloseHelper.numeric){e(u).find("span.numericTab").css("width",i.cssAttrsHor.liWidth+"px")}else if(i.openCloseHelper.openIcon){e(u).find("i").css("width",i.cssAttrsHor.liWidth+"px")}}}else if(i.type==="vertical"){if(u.find("h1").length>0){e(u).find("h1").css("padding-top",i.cssAttrsVer.liHeight/2-f+"px")}if(i.openCloseHelper){if(i.openCloseHelper.numeric){e(u).find("span.numericTab").css("padding-top",i.cssAttrsVer.liHeight/2-r+"px")}else if(i.openCloseHelper.openIcon){e(u).find("i").css("padding-top",i.cssAttrsVer.liHeight/2-o+"px")}}}}if(i.startSlide){if(i.type==="vertical"){h.animateSlideDown(u[i.startSlide-1])}else{h.animateSlideRight(u[i.startSlide-1])}if(i.openCloseHelper.closeIcon){e(u[i.startSlide-1]).find("i").attr("class","icon-"+i.openCloseHelper.closeIcon)}if(i.classTab){e(u[i.startSlide-1]).addClass(i.classTab)}}e(u).last().addClass("last")},slideContent:function(t){if(e(t.target).is("div")||e(t.target).parent().is("div")){return false}var n=e(t.currentTarget),r=e(n).parent().find("div:visible");if(i.autoPlay&&!t.isTrigger){c.stop()}if(i.openOnebyOne&&r.length>0&&i.type==="vertical"){h.animateSlideUp(r)}if(i.type==="vertical"){if(e(n).find("div").is(":visible")){h.animateSlideUp(n)}else{h.animateSlideDown(n)}}else{if(e(n).find("div").is(":hidden")){h.animateSlideRight(n);h.animateSlideLeft(r)}}},animateSlideUp:function(t){if(i.openOnebyOne){if(e(t).parent().hasClass("last")){e(t).parent().removeClass(i.classTab).find("div").slideUp("fast")}else{e(t).parent().removeAttr("class").find("div").slideUp("fast")}}else{if(e(t).hasClass("last")){e(t).removeClass(i.classTab).find("div").slideUp("fast")}else{e(t).removeAttr("class").find("div").slideUp("fast")}}if(i.openCloseHelper.openIcon){e(t).parent().find("i").attr("class","icon-"+i.openCloseHelper.openIcon)}},animateSlideDown:function(t){e(t).parent().find("."+i.classTab).removeAttr("class");if(i.openCloseHelper.closeIcon){if(e(t).find("i").length>0){e(t).find("i").attr("class","icon-"+i.openCloseHelper.closeIcon)}else{e(t).parent().find("i").attr("class","icon-"+i.openCloseHelper.closeIcon)}}e(t).addClass(i.classTab).find("div").slideDown("fast")},animateSlideRight:function(t){e(t).parent().find("."+i.classTab).removeClass(i.classTab);if(i.openCloseHelper.closeIcon){if(e(t).find("i").length>0){e(t).find("i").attr("class","icon-"+i.openCloseHelper.closeIcon)}else{e(t).parent().find("i").attr("class","icon-"+i.openCloseHelper.closeIcon)}}e(t).addClass(i.classTab).animate({width:c.calcDivWidthHor()+i.cssAttrsHor.liWidth+"px"},"fast");e(t).find("div").css("display","block")},animateSlideLeft:function(t){e(t).parent().find("div").animate({width:"0px"},"fast",function(){e(this).css({display:"none",width:c.calcDivWidthHor()+"px"})});if(e(t).parent().hasClass("last")){e(t).parent().removeClass(i.classTab).animate({width:i.cssAttrsHor.liWidth+"px"},"fast")}else{e(t).parent().removeAttr("class").animate({width:i.cssAttrsHor.liWidth+"px"},"fast")}if(i.openCloseHelper.openIcon){e(t).parent().find("i").attr("class","icon-"+i.openCloseHelper.openIcon)}},resetSlideContent:function(){u.find("div").hide()},init:function(){if(i.type==="vertical"){e(t).addClass("accordion-ver")}else{e(t).addClass("accordion-hor")}h.bindEvents()}};h.init();return c};e.fn.awsAccordion=function(e){var n=this;return n.each(function(){var r;r=new t(n,e);n.data("awsAccordion",r)})}})(jQuery)
